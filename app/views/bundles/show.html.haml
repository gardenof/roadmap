%div#notice= notice

%div.bundle-header
  %header
    #{@bundle.name}
    %span.desc
      #{@bundle.class}
    .action-links
      = link_to 'Edit', edit_project_bundle_path(@project,@bundle)
      \|
      = link_to 'Back', project_bundles_path(@project)

%table.layout
  %tr
    %td.panel
      .panelHeaderRight
      .panelHeaderLeft
      .panelHeader
        %span.panelTitle BUNDLED
        .operations
          = form_tag schedule_project_bundle_path(@project, @bundle) do |f|
            = submit_tag 'Send Bundle to Tracker', confirm: "This action will create in Tracker any features that have not yet been created in Tracker. Features previously sent to Tracker will not be modified."

      - @attached_features.each do |feature|
        .collapsed-feature{class: tracker_status_class(feature)}
          %span.feature_name= link_to feature.name, [@project, feature]
          .operations
            = form_tag remove_feature_project_bundle_path(@project,@bundle) do |f|
              = hidden_field_tag :feature_id, feature.id
              = submit_tag '-'
          .status-tags
            = feature.current_state

    %td.panel
      .panelHeaderRight
      .panelHeaderLeft
      .panelHeader
        %span.panelTitle AVAILABLE

      - @available_features.each do |feature|
        .collapsed-feature{class: tracker_status_class(feature)}
          %span.feature_name= link_to feature.name, [@project, feature]
          .operations
          .operations
            = form_tag add_feature_project_bundle_path(@project,@bundle) do |f|
              = hidden_field_tag :feature_id, feature.id
              = submit_tag '+'
          .status-tags
            = feature.current_state
